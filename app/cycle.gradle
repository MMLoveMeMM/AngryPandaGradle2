println 'This is executed during the configuration phase.'

task configured {
    group 'cycle'
    println 'This is also executed during the configuration phase.'
}

task testCycle {
    group 'cycle'
    doLast {
        println 'This is executed during the execution phase.'
    }
}

task testCycleBoth {
    group 'cycle'

    doFirst {
        println 'This is executed first during the execution phase.'
    }
    doLast {
        println 'This is executed last during the execution phase.'
    }
    println 'This is executed during the configuration phase as well.'
}

class CycleTask extends DefaultTask{
    String installObjectName

    @TaskAction
    void checkObject() {
        println "[phase:execution] install:checkObject   (${installObjectName})"
    }

    @TaskAction
    void installObject() {
        println "[phase:execution] install:installObject (${installObjectName})"
    }
}

task cycle(type: CycleTask) {
    group 'cycle'
    description 'install task'
    installObjectName 'liuzhibao.jar'

    println "[phase:configuration] install"
    doFirst {
        println "[phase:execution] install:doFirst()"
    }
    doLast {
        println "[phase:execution] install:doLast()"
    }
}